var BackendLogger,Log,_;Log=require("./log"),_=require("lodash"),module.exports=BackendLogger=function(){function t(){this.old_log=[],this["try"]=0,this.last_status="none"}return t.prototype.log=function(t){return _.each(this.diff(t),Log.backend),this.old_log=t.log,this.checkTimeout(t)},t.prototype.checkTimeout=function(t){return t.status===this.status?(this["try"]>10&&Log.error("Deployment timed out."),this["try"]+=1):this.last_status=t.status},t.prototype.diff=function(t){return _.select(t.log,function(t){return function(o){return!_.contains(_.map(t.old_log,"message"),o.message)}}(this))},t.fromBackendStatus=function(t,o){return"download_github_repo"===t?this.backend("Downloading the GitHub repo."):"build"===t?this.backend("Building app."):"deployed"===t?this.backend("App is live."):"error"===t?o?this.error(o):this.backendError():this.backend("Unknown status.")},t}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tlbmRfbG9nZ2VyLmNvZmZlZSIsImJhY2tlbmRfbG9nZ2VyLmpzIl0sIm5hbWVzIjpbIkJhY2tlbmRMb2dnZXIiLCJMb2ciLCJfIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0aGlzIiwib2xkX2xvZyIsImxhc3Rfc3RhdHVzIiwicHJvdG90eXBlIiwibG9nIiwiYnVpbGQiLCJlYWNoIiwiZGlmZiIsImJhY2tlbmQiLCJjaGVja1RpbWVvdXQiLCJzdGF0dXMiLCJlcnJvciIsInNlbGVjdCIsIl90aGlzIiwibmV3X2RhdGEiLCJjb250YWlucyIsIm1hcCIsIm1lc3NhZ2UiLCJmcm9tQmFja2VuZFN0YXR1cyIsIm1zZyIsImJhY2tlbmRFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsZUFBQUMsSUFBQUMsQ0FBQUQsS0FBTUUsUUFBUSxTQUFkRCxFQUNJQyxRQUFRLFVBRFpDLE9BR09DLFFBQ0RMLGNBQUEsV0FDUyxRQUFBQSxLQUNYTSxLQUFDQyxXQUNERCxLQUFDLE9BQU0sRUFDUEEsS0FBQ0UsWUFBYyxPQ2dEakIsTURuREFSLEdBQUFTLFVBS0FDLElBQUssU0FBQ0MsR0NNSixNRExBVCxHQUFFVSxLQUFLTixLQUFDTyxLQUFLRixHQUFRVixJQUFJYSxTQUV6QlIsS0FBQ0MsUUFBVUksRUFBTUQsSUFDakJKLEtBQUNTLGFBQWFKLElBVGhCWCxFQUFBUyxVQVdBTSxhQUFjLFNBQUNKLEdBQ2IsTUFBR0EsR0FBTUssU0FBVVYsS0FBQ1UsUUFDbUJWLEtBQUMsT0FBTSxJQUE1Q0wsSUFBSWdCLE1BQU0seUJBQ1ZYLEtBQUMsUUFBTyxHQUVSQSxLQUFDRSxZQUFjRyxFQUFNSyxRQWhCekJoQixFQUFBUyxVQWtCQUksS0FBTSxTQUFDRixHQ1FMLE1EUEFULEdBQUVnQixPQUFPUCxFQUFNRCxJQUFLLFNBQUFTLEdDUWxCLE1EUmtCLFVBQUNDLEdDU2pCLE9EUkZsQixFQUFHbUIsU0FBU25CLEVBQUVvQixJQUFJSCxFQUFDWixRQUFTLFdBQVlhLEVBQVNHLFdBRC9CakIsUUFHdEJOLEVBQUN3QixrQkFBbUIsU0FBQ1IsRUFBUVMsR0FDM0IsTUFBYSx5QkFBVlQsRUFDRFYsS0FBQ1EsUUFBUSxnQ0FDTyxVQUFWRSxFQUNOVixLQUFDUSxRQUFRLGlCQUNPLGFBQVZFLEVBQ05WLEtBQUNRLFFBQVEsZ0JBQ08sVUFBVkUsRUFDSFMsRUFDRG5CLEtBQUNXLE1BQU1RLEdBRVBuQixLQUFDb0IsZUFFSHBCLEtBQUNRLFFBQVEsb0JDZ0JOZCIsImZpbGUiOiJiYWNrZW5kX2xvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIkxvZyA9IHJlcXVpcmUgJy4vbG9nJ1xuXyA9IHJlcXVpcmUgJ2xvZGFzaCdcblxubW9kdWxlLmV4cG9ydHMgPVxuY2xhc3MgQmFja2VuZExvZ2dlclxuICBjb25zdHJ1Y3RvcjogLT5cbiAgICBAb2xkX2xvZyA9IFtdXG4gICAgQHRyeSA9IDBcbiAgICBAbGFzdF9zdGF0dXMgPSAnbm9uZSdcblxuICBsb2c6IChidWlsZCkgLT5cbiAgICBfLmVhY2ggQGRpZmYoYnVpbGQpLCBMb2cuYmFja2VuZFxuXG4gICAgQG9sZF9sb2cgPSBidWlsZC5sb2dcbiAgICBAY2hlY2tUaW1lb3V0KGJ1aWxkKVxuXG4gIGNoZWNrVGltZW91dDogKGJ1aWxkKSAtPlxuICAgIGlmIGJ1aWxkLnN0YXR1cyA9PSBAc3RhdHVzXG4gICAgICBMb2cuZXJyb3IgJ0RlcGxveW1lbnQgdGltZWQgb3V0LicgaWYgQHRyeSA+IDEwXG4gICAgICBAdHJ5ICs9IDFcbiAgICBlbHNlXG4gICAgICBAbGFzdF9zdGF0dXMgPSBidWlsZC5zdGF0dXNcblxuICBkaWZmOiAoYnVpbGQpIC0+XG4gICAgXy5zZWxlY3QgYnVpbGQubG9nLCAobmV3X2RhdGEpID0+XG4gICAgICAhXy5jb250YWlucyhfLm1hcChAb2xkX2xvZywgJ21lc3NhZ2UnKSwgbmV3X2RhdGEubWVzc2FnZSlcblxuICBAZnJvbUJhY2tlbmRTdGF0dXM6IChzdGF0dXMsIG1zZykgLT5cbiAgICBpZiBzdGF0dXMgPT0gJ2Rvd25sb2FkX2dpdGh1Yl9yZXBvJ1xuICAgICAgQGJhY2tlbmQoJ0Rvd25sb2FkaW5nIHRoZSBHaXRIdWIgcmVwby4nKVxuICAgIGVsc2UgaWYgc3RhdHVzID09ICdidWlsZCdcbiAgICAgIEBiYWNrZW5kKCdCdWlsZGluZyBhcHAuJylcbiAgICBlbHNlIGlmIHN0YXR1cyA9PSAnZGVwbG95ZWQnXG4gICAgICBAYmFja2VuZCgnQXBwIGlzIGxpdmUuJylcbiAgICBlbHNlIGlmIHN0YXR1cyA9PSAnZXJyb3InXG4gICAgICBpZiBtc2dcbiAgICAgICAgQGVycm9yKG1zZylcbiAgICAgIGVsc2VcbiAgICAgICAgQGJhY2tlbmRFcnJvcigpXG4gICAgZWxzZVxuICAgICAgQGJhY2tlbmQoJ1Vua25vd24gc3RhdHVzLicpXG4iLG51bGxdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==