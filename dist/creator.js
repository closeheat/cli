var Authorizer,Color,Creator,Dirs,Log,Promise,Prompt,Pusher,TemplateDownloader,Transformer,dirmr,fs,inquirer,_;inquirer=require("inquirer"),fs=require("fs.extra"),dirmr=require("dirmr"),Promise=require("bluebird"),_=require("lodash"),Prompt=require("./prompt"),Dirs=require("./dirs"),TemplateDownloader=require("./template_downloader"),Transformer=require("./transformer"),Pusher=require("./pusher"),Authorizer=require("./authorizer"),Log=require("./log"),Color=require("./color"),module.exports=Creator=function(){function r(){}return r.prototype.createFromSettings=function(r){var e;return this.dirs=new Dirs(r),this.checkDir(),e={framework:"angular",template:"bootstrap",javascript:"javascript",html:"html",css:"css"},this.createWithSettings(_.defaults(r,e))},r.prototype.createFromPrompt=function(r){return this.dirs=new Dirs(r),this.checkDir(),inquirer.prompt(Prompt.questions,function(e){return function(t){return e.createWithSettings(_.defaults(t,r))["catch"](function(r){return console.log(r)})}}(this))},r.prototype.checkDir=function(){return fs.existsSync(this.dirs.target)?Log.error("Directory "+this.dirs.target+" already exists"):void 0},r.prototype.createWithSettings=function(r){return Log.br(),Log.spin("Downloading templates and creating app structure."),this.dirs.clean(),this.dirs.create().then(function(e){return function(){var t;return t=new TemplateDownloader(e.dirs,r.template,r.framework),t.download().then(function(){return t.merge().then(function(){return new Transformer(e.dirs).transform(r).then(function(){return e.moveToTarget().then(function(){return e.dirs.clean(),Log.stop(),Log.inner("App folder created at "+e.dirs.target+"."),r.deploy?(Log.br(),Log.doneLine("Setting up deployment."),new Pusher(r.name,e.dirs.target).push().then(function(){return Log.p("Run app server with:"),Log.code(["cd "+r.name,"closeheat"])})):void 0})})})})}}(this))["catch"](function(r){return Log.error(r)})},r.prototype.moveToTarget=function(){return new Promise(function(r){return function(e,t){return dirmr([r.dirs.transformed]).join(r.dirs.target).complete(function(r){return r?t(r):e()})}}(this))},r}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0b3IuY29mZmVlIiwiY3JlYXRvci5qcyJdLCJuYW1lcyI6WyJBdXRob3JpemVyIiwiQ29sb3IiLCJDcmVhdG9yIiwiRGlycyIsIkxvZyIsIlByb21pc2UiLCJQcm9tcHQiLCJQdXNoZXIiLCJUZW1wbGF0ZURvd25sb2FkZXIiLCJUcmFuc2Zvcm1lciIsImRpcm1yIiwiZnMiLCJpbnF1aXJlciIsIl8iLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInByb3RvdHlwZSIsImNyZWF0ZUZyb21TZXR0aW5ncyIsInNldHRpbmdzIiwiZGVmYXVsdHMiLCJ0aGlzIiwiZGlycyIsImNoZWNrRGlyIiwiZnJhbWV3b3JrIiwidGVtcGxhdGUiLCJqYXZhc2NyaXB0IiwiaHRtbCIsImNzcyIsImNyZWF0ZVdpdGhTZXR0aW5ncyIsImNyZWF0ZUZyb21Qcm9tcHQiLCJwcm9tcHQiLCJxdWVzdGlvbnMiLCJfdGhpcyIsImFuc3dlcnMiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZXhpc3RzU3luYyIsInRhcmdldCIsImVycm9yIiwiYnIiLCJzcGluIiwiY2xlYW4iLCJjcmVhdGUiLCJ0aGVuIiwiZG93bmxvYWRlciIsImRvd25sb2FkIiwibWVyZ2UiLCJ0cmFuc2Zvcm0iLCJtb3ZlVG9UYXJnZXQiLCJzdG9wIiwiaW5uZXIiLCJkZXBsb3kiLCJkb25lTGluZSIsIm5hbWUiLCJwdXNoIiwicCIsImNvZGUiLCJlIiwicmVzb2x2ZSIsInJlamVjdCIsInRyYW5zZm9ybWVkIiwiam9pbiIsImNvbXBsZXRlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxZQUFBQyxNQUFBQyxRQUFBQyxLQUFBQyxJQUFBQyxRQUFBQyxPQUFBQyxPQUFBQyxtQkFBQUMsWUFBQUMsTUFBQUMsR0FBQUMsU0FBQUMsQ0FBQUQsVUFBV0UsUUFBUSxZQUFuQkgsR0FDS0csUUFBUSxZQURiSixNQUVRSSxRQUFRLFNBRmhCVCxRQUdVUyxRQUFRLFlBSGxCRCxFQUlJQyxRQUFRLFVBSlpSLE9BTVNRLFFBQVEsWUFOakJYLEtBT09XLFFBQVEsVUFQZk4sbUJBUXFCTSxRQUFRLHlCQVI3QkwsWUFTY0ssUUFBUSxpQkFUdEJQLE9BVVNPLFFBQVEsWUFWakJkLFdBV2FjLFFBQVEsZ0JBWHJCVixJQWFNVSxRQUFRLFNBYmRiLE1BY1FhLFFBQVEsV0FkaEJDLE9BZ0JPQyxRQUNEZCxRQUFBLFdDWUosUUFBU0EsTUFpRlQsTUQ1RkFBLEdBQUFlLFVBQUFDLG1CQUFvQixTQUFDQyxHQUNuQixHQUFBQyxFQ3VCQSxPRHZCQUMsTUFBQ0MsS0FBVyxHQUFBbkIsTUFBS2dCLEdBQ2pCRSxLQUFDRSxXQUVESCxHQUNFSSxVQUFXLFVBQ1hDLFNBQVUsWUFDVkMsV0FBWSxhQUNaQyxLQUFNLE9BQ05DLElBQUssT0FFUFAsS0FBQ1EsbUJBQW1CaEIsRUFBRU8sU0FBU0QsRUFBVUMsS0FYM0NsQixFQUFBZSxVQWFBYSxpQkFBa0IsU0FBQ1gsR0NpQmpCLE1EaEJBRSxNQUFDQyxLQUFXLEdBQUFuQixNQUFLZ0IsR0FDakJFLEtBQUNFLFdBRURYLFNBQVNtQixPQUFPekIsT0FBTzBCLFVBQVcsU0FBQUMsR0NjaEMsTURkZ0MsVUFBQ0MsR0NlL0IsTURkRkQsR0FBQ0osbUJBQW1CaEIsRUFBRU8sU0FBU2MsRUFBU2YsSUFBVyxTQUFNLFNBQUNnQixHQ2V0RCxNRGRGQyxTQUFRQyxJQUFJRixPQUZrQmQsUUFqQnBDbkIsRUFBQWUsVUFxQkFNLFNBQVUsV0FDUixNQUFHWixJQUFHMkIsV0FBV2pCLEtBQUNDLEtBQUtpQixRQUNyQm5DLElBQUlvQyxNQUFPLGFBQVluQixLQUFDQyxLQUFLaUIsT0FBTyxtQkFEdEMsUUF0QkZyQyxFQUFBZSxVQXlCQVksbUJBQW9CLFNBQUNLLEdDd0JuQixNRHZCQTlCLEtBQUlxQyxLQUNKckMsSUFBSXNDLEtBQUsscURBRVRyQixLQUFDQyxLQUFLcUIsUUFFTnRCLEtBQUNDLEtBQUtzQixTQUFTQyxLQUFLLFNBQUFaLEdDbUJsQixNRG5Ca0IsWUFDbEIsR0FBQWEsRUNxQkUsT0RyQkZBLEdBQWlCLEdBQUF0QyxvQkFBbUJ5QixFQUFDWCxLQUFNWSxFQUFRVCxTQUFVUyxFQUFRVixXQUVyRXNCLEVBQVdDLFdBQVdGLEtBQUssV0NvQnZCLE1EbkJGQyxHQUFXRSxRQUFRSCxLQUFLLFdDb0JwQixNRG5CRSxJQUFBcEMsYUFBWXdCLEVBQUNYLE1BQU0yQixVQUFVZixHQUFTVyxLQUFLLFdDb0IzQyxNRG5CRlosR0FBQ2lCLGVBQWVMLEtBQUssV0FNbkIsTUFMQVosR0FBQ1gsS0FBS3FCLFFBRU52QyxJQUFJK0MsT0FDSi9DLElBQUlnRCxNQUFPLHlCQUF3Qm5CLEVBQUNYLEtBQUtpQixPQUFPLEtBRWhETCxFQUFzQm1CLFFBRXRCakQsSUFBSXFDLEtBQ0pyQyxJQUFJa0QsU0FBUywwQkFDVCxHQUFBL0MsUUFBTzJCLEVBQVFxQixLQUFNdEIsRUFBQ1gsS0FBS2lCLFFBQVFpQixPQUFPWCxLQUFLLFdDb0IvQyxNRG5CRnpDLEtBQUlxRCxFQUFFLHdCQUNOckQsSUFBSXNELE1BQ0QsTUFBS3hCLEVBQVFxQixLQUNkLGlCQVJKLGlCQVpVbEMsT0FzQmxCLFNBQU0sU0FBQ3NDLEdDc0JQLE1EckJBdkQsS0FBSW9DLE1BQU1tQixNQXREZHpELEVBQUFlLFVBd0RBaUMsYUFBYyxXQ3dCWixNRHZCSSxJQUFBN0MsU0FBUSxTQUFBNEIsR0N3QlYsTUR4QlUsVUFBQzJCLEVBQVNDLEdDeUJsQixNRHhCRm5ELFFBQU91QixFQUFDWCxLQUFLd0MsY0FBY0MsS0FBSzlCLEVBQUNYLEtBQUtpQixRQUFReUIsU0FBUyxTQUFDN0IsR0FDdEQsTUFBc0JBLEdBQWYwQixFQUFPMUIsR0FFZHlCLFFBSlF2QyxRQ21DUG5CIiwiZmlsZSI6ImNyZWF0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbnF1aXJlciA9IHJlcXVpcmUgJ2lucXVpcmVyJ1xuZnMgPSByZXF1aXJlICdmcy5leHRyYSdcbmRpcm1yID0gcmVxdWlyZSAnZGlybXInXG5Qcm9taXNlID0gcmVxdWlyZSAnYmx1ZWJpcmQnXG5fID0gcmVxdWlyZSAnbG9kYXNoJ1xuXG5Qcm9tcHQgPSByZXF1aXJlICcuL3Byb21wdCdcbkRpcnMgPSByZXF1aXJlICcuL2RpcnMnXG5UZW1wbGF0ZURvd25sb2FkZXIgPSByZXF1aXJlICcuL3RlbXBsYXRlX2Rvd25sb2FkZXInXG5UcmFuc2Zvcm1lciA9IHJlcXVpcmUgJy4vdHJhbnNmb3JtZXInXG5QdXNoZXIgPSByZXF1aXJlICcuL3B1c2hlcidcbkF1dGhvcml6ZXIgPSByZXF1aXJlICcuL2F1dGhvcml6ZXInXG5cbkxvZyA9IHJlcXVpcmUgJy4vbG9nJ1xuQ29sb3IgPSByZXF1aXJlICcuL2NvbG9yJ1xuXG5tb2R1bGUuZXhwb3J0cyA9XG5jbGFzcyBDcmVhdG9yXG4gIGNyZWF0ZUZyb21TZXR0aW5nczogKHNldHRpbmdzKSAtPlxuICAgIEBkaXJzID0gbmV3IERpcnMoc2V0dGluZ3MpXG4gICAgQGNoZWNrRGlyKClcblxuICAgIGRlZmF1bHRzID1cbiAgICAgIGZyYW1ld29yazogJ2FuZ3VsYXInXG4gICAgICB0ZW1wbGF0ZTogJ2Jvb3RzdHJhcCdcbiAgICAgIGphdmFzY3JpcHQ6ICdqYXZhc2NyaXB0J1xuICAgICAgaHRtbDogJ2h0bWwnXG4gICAgICBjc3M6ICdjc3MnXG5cbiAgICBAY3JlYXRlV2l0aFNldHRpbmdzKF8uZGVmYXVsdHMoc2V0dGluZ3MsIGRlZmF1bHRzKSlcblxuICBjcmVhdGVGcm9tUHJvbXB0OiAoc2V0dGluZ3MpIC0+XG4gICAgQGRpcnMgPSBuZXcgRGlycyhzZXR0aW5ncylcbiAgICBAY2hlY2tEaXIoKVxuXG4gICAgaW5xdWlyZXIucHJvbXB0IFByb21wdC5xdWVzdGlvbnMsIChhbnN3ZXJzKSA9PlxuICAgICAgQGNyZWF0ZVdpdGhTZXR0aW5ncyhfLmRlZmF1bHRzKGFuc3dlcnMsIHNldHRpbmdzKSkuY2F0Y2ggKGVycikgLT5cbiAgICAgICAgY29uc29sZS5sb2cgZXJyXG5cbiAgY2hlY2tEaXI6IC0+XG4gICAgaWYgZnMuZXhpc3RzU3luYyBAZGlycy50YXJnZXRcbiAgICAgIExvZy5lcnJvciBcIkRpcmVjdG9yeSAje0BkaXJzLnRhcmdldH0gYWxyZWFkeSBleGlzdHNcIlxuXG4gIGNyZWF0ZVdpdGhTZXR0aW5nczogKGFuc3dlcnMpIC0+XG4gICAgTG9nLmJyKClcbiAgICBMb2cuc3BpbignRG93bmxvYWRpbmcgdGVtcGxhdGVzIGFuZCBjcmVhdGluZyBhcHAgc3RydWN0dXJlLicpXG5cbiAgICBAZGlycy5jbGVhbigpXG5cbiAgICBAZGlycy5jcmVhdGUoKS50aGVuKD0+XG4gICAgICBkb3dubG9hZGVyID0gbmV3IFRlbXBsYXRlRG93bmxvYWRlcihAZGlycywgYW5zd2Vycy50ZW1wbGF0ZSwgYW5zd2Vycy5mcmFtZXdvcmspXG5cbiAgICAgIGRvd25sb2FkZXIuZG93bmxvYWQoKS50aGVuID0+XG4gICAgICAgIGRvd25sb2FkZXIubWVyZ2UoKS50aGVuID0+XG4gICAgICAgICAgbmV3IFRyYW5zZm9ybWVyKEBkaXJzKS50cmFuc2Zvcm0oYW5zd2VycykudGhlbiA9PlxuICAgICAgICAgICAgQG1vdmVUb1RhcmdldCgpLnRoZW4gPT5cbiAgICAgICAgICAgICAgQGRpcnMuY2xlYW4oKVxuXG4gICAgICAgICAgICAgIExvZy5zdG9wKClcbiAgICAgICAgICAgICAgTG9nLmlubmVyKFwiQXBwIGZvbGRlciBjcmVhdGVkIGF0ICN7QGRpcnMudGFyZ2V0fS5cIilcblxuICAgICAgICAgICAgICByZXR1cm4gdW5sZXNzIGFuc3dlcnMuZGVwbG95XG5cbiAgICAgICAgICAgICAgTG9nLmJyKClcbiAgICAgICAgICAgICAgTG9nLmRvbmVMaW5lICdTZXR0aW5nIHVwIGRlcGxveW1lbnQuJ1xuICAgICAgICAgICAgICBuZXcgUHVzaGVyKGFuc3dlcnMubmFtZSwgQGRpcnMudGFyZ2V0KS5wdXNoKCkudGhlbiA9PlxuICAgICAgICAgICAgICAgIExvZy5wIFwiUnVuIGFwcCBzZXJ2ZXIgd2l0aDpcIlxuICAgICAgICAgICAgICAgIExvZy5jb2RlIFtcbiAgICAgICAgICAgICAgICAgIFwiY2QgI3thbnN3ZXJzLm5hbWV9XCJcbiAgICAgICAgICAgICAgICAgIFwiY2xvc2VoZWF0XCJcbiAgICAgICAgICAgICAgICBdXG4gICAgKS5jYXRjaCAoZSkgLT5cbiAgICAgIExvZy5lcnJvcihlKVxuXG4gIG1vdmVUb1RhcmdldDogLT5cbiAgICBuZXcgUHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgZGlybXIoW0BkaXJzLnRyYW5zZm9ybWVkXSkuam9pbihAZGlycy50YXJnZXQpLmNvbXBsZXRlIChlcnIsIHJlc3VsdCkgLT5cbiAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpIGlmIGVyclxuXG4gICAgICAgIHJlc29sdmUoKVxuIixudWxsXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=